{"version":3,"file":"index.js","sources":["../src/dom-helper.js","../src/index.js"],"sourcesContent":["const stripHtml = element => element.innerHTML.replace(/<[^>]*>?/gm, '')\n\nconst parseStrDimensionToInt = elementSize => parseInt(elementSize, 10)\n\nconst getOffset = el => {\n  var rect = el.getBoundingClientRect()\n\n  return {\n    top: rect.top + document.body.scrollTop,\n    left: rect.left + document.body.scrollLeft\n  }\n}\n\nconst index = element => {\n  let children = element.parentNode.childNodes\n  let num = 0\n  for (var i = 0; i < children.length; i++) {\n    if (children[i] === element) return num\n    if (children[i].nodeType === 1) num++\n  }\n  return -1\n}\n\nconst addClass = (element, className) => {\n  if (element.classList) element.classList.add(className)\n  else element.className += ' ' + className\n}\n\nconst removeClass = (element, className) => {\n  if (element.classList) element.classList.remove(className)\n  else {\n    element.className = element.className.replace(\n      new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'),\n      ' '\n    )\n  }\n}\n\nconst hasClass = (element, className) => {\n  if (element.classList) return element.classList.contains(className)\n  else return new RegExp('(^| )' + className + '( |$)', 'gi').test(element.className)\n}\n\nconst findFirstChildWithClassName = (element, className) => {\n  const matches = element.getElementsByClassName(className)\n\n  if (matches && matches.length > 0) return matches[0]\n\n  return null\n}\n\nconst findChildrenWithClassName = (parentElement, className) => {\n  return parentElement.getElementsByClassName(className)\n}\n\nconst getHiddenElementOuterHeight = element => {\n  element.style.visibility = 'hidden'\n  element.style.display = 'block'\n  let elementHeight = element.offsetHeight\n  element.style.display = 'none'\n  element.style.visibility = 'visible'\n\n  return elementHeight\n}\n\nconst getHiddenElementOuterWidth = element => {\n  element.style.visibility = 'hidden'\n  element.style.display = 'block'\n  let elementWidth = element.offsetWidth\n  element.style.display = 'none'\n  element.style.visibility = 'visible'\n\n  return elementWidth\n}\n\nconst getElementWidth = el => {\n  let width = el.offsetWidth\n  let style = getComputedStyle(el)\n\n  width -=\n    parseFloat(style.paddingLeft) +\n    parseFloat(style.paddingRight) +\n    parseFloat(style.borderLeftWidth) +\n    parseFloat(style.borderRightWidth)\n\n  return width\n}\n\nconst getElementHeight = el => {\n  let height = el.offsetHeight\n  let style = getComputedStyle(el)\n\n  height -=\n    parseFloat(style.paddingTop) +\n    parseFloat(style.paddingBottom) +\n    parseFloat(style.borderTopWidth) +\n    parseFloat(style.borderBottomWidth)\n\n  return height\n}\n\nexport default {\n  stripHtml,\n  parseStrDimensionToInt,\n  getOffset,\n  index,\n  addClass,\n  removeClass,\n  hasClass,\n  getHiddenElementOuterHeight,\n  getHiddenElementOuterWidth,\n  findFirstChildWithClassName,\n  findChildrenWithClassName,\n  getElementWidth,\n  getElementHeight\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport DomHelper from './dom-helper'\nimport './styles.scss'\n\nexport const DragMode = {\n  REORDER: 'reorder',\n  SWAP: 'swap'\n}\n\n/**\n * Generate UuId\n * */\nconst generateUuid = () => {\n  let uuid = ''\n  let i\n  let random\n  for (i = 0; i < 32; i++) {\n    random = (Math.random() * 16) | 0\n\n    if (i === 8 || i === 12 || i === 16 || i === 20) {\n      uuid += '-'\n    }\n    uuid += (i === 12 ? 4 : i === 16 ? (random & 3) | 8 : random).toString(16)\n  }\n\n  return uuid\n}\n\nexport default Component => {\n  const wrapper = class RTFixedDraggableColumn extends React.Component {\n    getWrappedInstance() {\n      if (!this.wrappedInstance) console.warn('RTDraggableColumn - No wrapped instance')\n      if (this.wrappedInstance.getWrappedInstance) return this.wrappedInstance.getWrappedInstance()\n      else return this.wrappedInstance\n    }\n\n    containerRef = React.createRef();\n    currentColumnOrder = [];\n\n    constructor(props) {\n      super(props)\n      this.dragged = null\n      this.reorder = []\n      this.state = {\n        trigger: 0,\n        firstLoad: true\n      }\n\n      this.uniqueId = generateUuid()\n    }\n\n    // helper methods\n    findParentHeader(element) {\n      if (element.className.includes('rt-th')) {\n        return element\n      } else {\n        let parent = element.parentElement\n        while (!parent.className.includes('rt-th')) {\n          parent = parent.parentElement\n          if (!parent) break\n        }\n        return parent\n      }\n    }\n    // end helper methods\n\n    createDragEvents() {\n      const headersCollection = DomHelper.findChildrenWithClassName(\n        this.containerRef.current,\n        `${this.uniqueId} draggable-header`\n      )\n\n      // convert HTML collection to Javascript array\n      const headers = [...headersCollection]\n\n      headers.forEach((header, i) => {\n        // only allow drag events on drag enabled columns\n        if (header.className.includes('enable-drag')) {\n          const headerParent = header.parentNode\n\n          const {\n            draggableColumns: { enableColumnWideDrag = defaultProps.enableColumnWideDrag }\n          } = this.props\n\n          if (enableColumnWideDrag) {\n            headerParent.setAttribute('draggable', true)\n          } else {\n            header.setAttribute('draggable', true)\n            DomHelper.addClass(headerParent, 'transparent-border')\n          }\n\n          // ondragstart event\n          headerParent.ondragstart = e => {\n            e.stopPropagation()\n\n            const {\n              draggableColumns: {\n                disableTableScroll,\n                useDragImage = defaultProps.useDragImage,\n                dragImageClassName = defaultProps.dragImageClassName\n              }\n            } = this.props\n\n            if (disableTableScroll) {\n              const tableBody = DomHelper.findFirstChildWithClassName(\n                this.containerRef.current,\n                'rt-table'\n              )\n\n              if (tableBody) {\n                tableBody.style.overflow = 'hidden'\n              }\n            }\n\n            // counter used as a workaround for dragleave event fired when hovering over a child element\n            this.counter = 0\n            this.dragged = i\n            this.draggedName = DomHelper.stripHtml(headerParent)\n            this.draggedColumn = this.findParentHeader(headerParent)\n\n            this.iconWidth = DomHelper.getHiddenElementOuterWidth(this.reorderIndicatorUp)\n            this.iconHeight = DomHelper.getHiddenElementOuterHeight(this.reorderIndicatorUp)\n\n            e.dataTransfer.setData('text', 'b') // Firefox requires this to make dragging possible\n\n            if (useDragImage) {\n              const crt = this.draggedColumn.cloneNode(true)\n\n              crt.className = dragImageClassName\n              const columnWidth = DomHelper.getElementWidth(this.draggedColumn)\n              const columnHeight = DomHelper.getElementHeight(this.draggedColumn)\n\n              // calculate offset from draggedColumn element\n              let xOffSet = Math.floor(columnWidth / 2)\n              const yOffSet = Math.floor(columnHeight / 2)\n\n              // max-width of 150px, otherwise it looks blurry in Chrome (Windows)\n              if (columnWidth > 150) {\n                crt.style.width = '150px'\n                xOffSet = 150 / 2\n              }\n\n              crt.style.position = 'absolute'\n              crt.style.top = '-1000px'\n\n              document.body.appendChild(crt)\n              e.dataTransfer.effectAllowed = 'move'\n              e.dataTransfer.setDragImage(crt, xOffSet, yOffSet)\n\n              // set refernce to cloned Node\n              this.clone = crt\n            }\n          }\n\n          // ondrag event\n          headerParent.ondrag = e => {\n            e.stopPropagation()\n          }\n\n          headerParent.ondragenter = e => {\n            e.stopPropagation()\n            e.preventDefault()\n            this.counter++\n\n            if (DomHelper.stripHtml(e.target) !== this.draggedName) {\n              const {\n                draggableColumns: {\n                  mode = defaultProps.mode,\n                  onDragEnterClassName = defaultProps.onDragEnterClassName\n                }\n              } = this.props\n\n              if (mode === DragMode.SWAP && onDragEnterClassName) {\n                const dropHeader = this.findParentHeader(e.target)\n                DomHelper.addClass(dropHeader.firstChild, onDragEnterClassName)\n              }\n            }\n          }\n\n          // ondragover event\n          headerParent.ondragover = e => {\n            e.preventDefault()\n\n            // prevent bug when using multiple react tables\n            if (!this.draggedColumn) return\n\n            const {\n              draggableColumns: { mode = defaultProps.mode }\n            } = this.props\n\n            const dropHeader = this.findParentHeader(e.target)\n\n            // in reorder mode only\n            if (mode === DragMode.REORDER) {\n              if (DomHelper.stripHtml(e.target) !== this.draggedName) {\n                const containerOffset = DomHelper.getOffset(this.containerRef.current)\n                const dropHeaderOffset = DomHelper.getOffset(dropHeader)\n                const targetLeft = dropHeaderOffset.left - containerOffset.left\n                const columnCenter = dropHeaderOffset.left + dropHeader.offsetWidth / 2\n\n                const tableBodyBoundingRec = DomHelper.findFirstChildWithClassName(\n                  this.containerRef.current,\n                  'rt-table'\n                ).getBoundingClientRect()\n\n                // determine current table viewport\n                const maxVisibleXPos = tableBodyBoundingRec.right\n                const minVisibleXPos = 0 - Math.ceil(this.iconWidth / 2)\n\n                this.reorderIndicatorUp.style.top =\n                  dropHeaderOffset.top - containerOffset.top - (this.iconHeight + 3) + 'px'\n\n                this.reorderIndicatorDown.style.top =\n                  dropHeaderOffset.top - containerOffset.top + dropHeader.offsetHeight + 3 + 'px'\n\n                if (e.pageX > columnCenter) {\n                  this.reorderIndicatorUp.style.left =\n                    targetLeft + dropHeader.offsetWidth - Math.ceil(this.iconWidth / 2) + 'px'\n                  this.reorderIndicatorDown.style.left =\n                    targetLeft + dropHeader.offsetWidth - Math.ceil(this.iconWidth / 2) + 'px'\n                  this.dropPosition = 1\n                } else {\n                  this.reorderIndicatorUp.style.left =\n                    targetLeft - Math.ceil(this.iconWidth / 2) + 'px'\n                  this.reorderIndicatorDown.style.left =\n                    targetLeft - Math.ceil(this.iconWidth / 2) + 'px'\n\n                  this.dropPosition = -1\n                }\n\n                if (\n                  DomHelper.parseStrDimensionToInt(this.reorderIndicatorUp.style.left) >\n                    maxVisibleXPos ||\n                  DomHelper.parseStrDimensionToInt(this.reorderIndicatorUp.style.left) <\n                    minVisibleXPos\n                ) {\n                  // do not show indicators if position is outside leftmost or rightmost bounds of the react table\n                  this.reorderIndicatorUp.style.display = 'none'\n                  this.reorderIndicatorDown.style.display = 'none'\n                } else {\n                  this.reorderIndicatorUp.style.display = 'block'\n                  this.reorderIndicatorDown.style.display = 'block'\n                  this.reorderIndicatorUp.style.zIndex = 50\n                  this.reorderIndicatorDown.style.zIndex = 50\n                }\n              }\n            }\n          }\n\n          headerParent.ondragleave = e => {\n            e.preventDefault()\n\n            this.counter--\n\n            const {\n              draggableColumns: {\n                mode = defaultProps.mode,\n                onDragEnterClassName = defaultProps.onDragEnterClassName\n              }\n            } = this.props\n\n            if (mode === DragMode.REORDER) {\n              if (this.counter === 0) {\n                this.reorderIndicatorUp.style.display = 'none'\n                this.reorderIndicatorDown.style.display = 'none'\n              }\n            } else if (mode === DragMode.SWAP) {\n              if (this.counter === 0 && onDragEnterClassName) {\n                const dropHeader = this.findParentHeader(e.target)\n                DomHelper.removeClass(dropHeader.firstChild, onDragEnterClassName)\n              }\n            }\n          }\n\n          // ondrop event\n          headerParent.ondrop = e => {\n            e.preventDefault()\n\n            // prevent bug when using multiple react tables\n            if (!this.draggedColumn) return\n\n            const {\n              draggableColumns: { mode = defaultProps.mode, onDropSuccess }\n            } = this.props\n\n            if (mode === DragMode.REORDER) {\n              // only move if the dragged column is meets position threshold\n              let dragIndex = DomHelper.index(this.draggedColumn)\n              let dropIndex = DomHelper.index(this.findParentHeader(e.target))\n              let allowDrop = dragIndex !== dropIndex\n\n              if (\n                allowDrop &&\n                ((dropIndex - dragIndex === 1 && this.dropPosition === -1) ||\n                  (dragIndex - dropIndex === 1 && this.dropPosition === 1))\n              ) {\n                allowDrop = false\n              }\n\n              if (allowDrop) {\n                // readjust dropIndex value for edge cases\n                // if dragging a column from left to right\n                if (this.dragged < dropIndex) {\n                  if (this.dropPosition === -1) {\n                    dropIndex = dropIndex - 1\n                  }\n                } else {\n                  // dragging a column from right to left\n                  if (this.dropPosition === 1) {\n                    dropIndex = dropIndex + 1\n                  }\n                }\n\n                this.reorder = { a: dropIndex, b: this.dragged }\n\n                if (onDropSuccess) {\n                  const containerOffset = DomHelper.getOffset(this.containerRef.current)\n\n                  // adjust offSets to be respective to the containerOffset\n                  const oldOffset = DomHelper.getOffset(this.draggedColumn)\n                  oldOffset.top = oldOffset.top - containerOffset.top\n                  oldOffset.left = oldOffset.left - containerOffset.left\n\n                  const newOffset = DomHelper.getOffset(this.findParentHeader(e.target))\n                  newOffset.top = newOffset.top - containerOffset.top\n                  newOffset.left = newOffset.left - containerOffset.left\n\n                  // (draggedColumn, targetColumn, oldIndex, newIndex, oldOffset, newOffset)\n                  onDropSuccess(\n                    this.reorder,\n                    this.currentColumnOrder[this.dragged],\n                    this.currentColumnOrder[dropIndex],\n                    this.dragged,\n                    dropIndex,\n                    oldOffset,\n                    newOffset\n                  )\n\n                  this.reorder = []\n                }\n\n                // trigger a re-render\n                this.setState({ trigger: Math.random(), firstLoad: false })\n              }\n            } else if (mode === DragMode.SWAP) {\n              this.reorder = { a: i, b: this.dragged }\n\n              if (onDropSuccess) {\n                // (draggedColumn, targetColumn, oldIndex, newIndex)\n                onDropSuccess(\n                  this.reorder,\n                  this.currentColumnOrder[this.dragged],\n                  this.currentColumnOrder[i],\n                  this.dragged,\n                  i\n                )\n\n                this.reorder = []\n              }\n\n              // trigger a re-render\n              this.setState({ trigger: Math.random(), firstLoad: false })\n            }\n\n            this.dragged = null\n            this.draggedName = null\n            this.draggedColumn = null\n            this.dropPosition = null\n            this.counter = 0\n            this.reorderIndicatorUp.style.display = 'none'\n            this.reorderIndicatorDown.style.display = 'none'\n          }\n\n          // ondragend event\n          headerParent.ondragend = e => {\n            const {\n              draggableColumns: { disableTableScroll, overflow }\n            } = this.props\n\n            e.stopPropagation()\n\n            if (this.clone) {\n              document.body.removeChild(this.clone)\n              this.clone = null\n            }\n\n            if (disableTableScroll) {\n              const tableBody = DomHelper.findFirstChildWithClassName(\n                this.containerRef.current,\n                'rt-table'\n              )\n\n              if (tableBody) {\n                tableBody.style.overflow = overflow || defaultProps.overflow\n              }\n            }\n          }\n        }\n      })\n    }\n\n    componentDidMount() {\n      if (this.props.draggableColumns.draggable.length > 0) this.createDragEvents()\n    }\n\n    componentDidUpdate() {\n      if (this.props.draggableColumns.draggable.length > 0) this.createDragEvents()\n    }\n\n    // prevent side effects such as accidentally resizing column while dragging a column\n    stopPropagation = e => {\n      e.stopPropagation()\n    };\n\n    render() {\n      const { columns, draggableColumns, ...rest } = this.props\n      const {\n        draggable = defaultProps.draggable,\n        mode = defaultProps.mode,\n        onDraggedColumnChange,\n        reorderIndicatorUpClassName = defaultProps.reorderIndicatorUpClassName,\n        reorderIndicatorDownClassName = defaultProps.reorderIndicatorDownClassName\n      } = draggableColumns\n\n      let reorderIndicatorUp = (\n        <span\n          ref={el => {\n            this.reorderIndicatorUp = el\n          }}\n          className={`arrow arrow-bar is-top ${reorderIndicatorUpClassName}`}\n          style={{ position: 'absolute', display: 'none' }}\n        />\n      )\n\n      let reorderIndicatorDown = (\n        <span\n          ref={el => {\n            this.reorderIndicatorDown = el\n          }}\n          className={`arrow arrow-bar is-bottom ${reorderIndicatorDownClassName}`}\n          style={{ position: 'absolute', display: 'none' }}\n        />\n      )\n\n      const cols = columns.map(col => {\n        let headerClassName = `${this.uniqueId} draggable-header`\n\n        // add additional className if column is draggable enabled\n        if (\n          (draggable.length > 0 && draggable.includes(col.id)) ||\n          draggable.includes(col.accessor)\n        ) {\n          headerClassName = `${headerClassName} enable-drag`\n        }\n\n        return {\n          ...col,\n          Header:\n            typeof col.Header === 'function' ? (\n              <div onClick={this.stopPropagation} className={headerClassName}>\n                {col.Header()}\n              </div>\n            ) : (\n              <div onClick={this.stopPropagation} className={headerClassName}>\n                {col.Header}\n              </div>\n            )\n        }\n      })\n\n      // run all reorder events\n      //   if (mode && mode === DragMode.SWAP) {\n      //     this.reorder.forEach(o => (cols[o.a] = cols.splice(o.b, 1, cols[o.a])[0]))\n      //   } else {\n      //     // mode: reorder - default\n      //     this.reorder.forEach(o => cols.splice(o.a, 0, cols.splice(o.b, 1)[0]))\n      //   }\n\n      // track final column order\n      this.currentColumnOrder = cols\n\n      // fire change event?\n      if (!this.state.firstLoad) {\n        const originalOrder = columns.map(col => {\n          if (typeof col.accessor === 'function') return col.id\n          return col.accessor\n        })\n\n        const newOrder = cols.map(col => {\n          if (typeof col.accessor === 'function') return col.id\n          return col.accessor\n        })\n\n        // if order is not equal, then call onDraggedColumnChange prop\n        if (JSON.stringify(originalOrder) !== JSON.stringify(newOrder)) {\n          if (onDraggedColumnChange) onDraggedColumnChange(cols)\n        }\n      }\n\n      // render\n      return (\n        <div\n          className='rt-draggable-container'\n          ref={this.containerRef}\n          style={{ position: 'relative' }}\n        >\n          <Component\n            {...rest}\n            draggableColumns={draggableColumns}\n            columns={cols}\n            ref={r => (this.wrappedInstance = r)}\n          />\n          {reorderIndicatorUp}\n          {reorderIndicatorDown}\n        </div>\n      )\n    }\n  }\n\n  const defaultProps = {\n    mode: DragMode.REORDER,\n    draggable: [],\n    enableColumnWideDrag: true,\n    disableTableScroll: false,\n    overflow: 'auto',\n    useDragImage: true,\n    dragImageClassName: 'rt-dragged-item',\n    onDragEnterClassName: 'rt-drag-enter-item',\n    reorderIndicatorUpClassName: '',\n    reorderIndicatorDownClassName: ''\n  }\n\n  wrapper.displayName = 'RTDraggableColumn'\n\n  wrapper.propTypes = {\n    draggableColumns: PropTypes.shape({\n      /** mode to either reorder the column or swap column position on drop */\n      mode: PropTypes.oneOf([DragMode.REORDER, DragMode.SWAP]).isRequired,\n      /** array of column accessors to allow drag and drop */\n      draggable: PropTypes.arrayOf(PropTypes.string),\n      /** if {true} then entire header column is draggable.  If {false} then only header column text is draggable.\n       * Set to {false} if you experience buggyness when using with react-table column sorting/resizing functionality\n       */\n      enableColumnWideDrag: PropTypes.bool,\n      /** disable ReactTable horizontal/vertical scrolling when dragging a column */\n      disableTableScroll: PropTypes.bool,\n      /** used with disableTableScroll={true} to reset ReactTable overflow style onDragEnd event */\n      overflow: PropTypes.string,\n      /** clone dragged column?  useful for applying a different css class */\n      useDragImage: PropTypes.bool,\n      /** dragImageClassName only applies when useDragImage={true} */\n      dragImageClassName: PropTypes.string,\n      /** Swap mode only - css class */\n      onDragEnterClassName: PropTypes.string,\n      /** callback method to be notified when on column drop success - signature: function(draggedColumn, targetColumn, oldIndex, newIndex, oldOffset, newOffset)  */\n      onDropSuccess: PropTypes.func,\n      /** callback method to be notified when column order changes - signature: function(columns)  */\n      onDraggedColumnChange: PropTypes.func,\n      /** additional className for reorder indicator Up */\n      reorderIndicatorUpClassName: PropTypes.string,\n      /** additional className for reorder indicator Down */\n      reorderIndicatorDownClassName: PropTypes.string\n    })\n  }\n\n  return wrapper\n}\n"],"names":["stripHtml","element","innerHTML","replace","parseStrDimensionToInt","parseInt","elementSize","getOffset","rect","el","getBoundingClientRect","top","document","body","scrollTop","left","scrollLeft","index","children","parentNode","childNodes","num","i","length","nodeType","addClass","className","classList","add","removeClass","remove","RegExp","split","join","hasClass","contains","test","findFirstChildWithClassName","matches","getElementsByClassName","findChildrenWithClassName","parentElement","getHiddenElementOuterHeight","style","visibility","display","elementHeight","offsetHeight","getHiddenElementOuterWidth","elementWidth","offsetWidth","getElementWidth","width","getComputedStyle","parseFloat","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","getElementHeight","height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","DragMode","generateUuid","uuid","random","Math","toString","wrapper","wrappedInstance","console","warn","getWrappedInstance","props","containerRef","React","createRef","currentColumnOrder","stopPropagation","dragged","reorder","state","uniqueId","includes","parent","headersCollection","DomHelper","current","headers","forEach","header","headerParent","draggableColumns","enableColumnWideDrag","defaultProps","setAttribute","ondragstart","disableTableScroll","useDragImage","dragImageClassName","tableBody","overflow","counter","draggedName","draggedColumn","findParentHeader","iconWidth","reorderIndicatorUp","iconHeight","dataTransfer","setData","crt","cloneNode","columnWidth","columnHeight","xOffSet","floor","yOffSet","position","appendChild","effectAllowed","setDragImage","clone","ondrag","ondragenter","preventDefault","e","target","mode","onDragEnterClassName","SWAP","dropHeader","firstChild","ondragover","REORDER","containerOffset","dropHeaderOffset","targetLeft","columnCenter","tableBodyBoundingRec","maxVisibleXPos","right","minVisibleXPos","ceil","reorderIndicatorDown","pageX","dropPosition","zIndex","ondragleave","ondrop","onDropSuccess","dragIndex","dropIndex","allowDrop","a","b","oldOffset","newOffset","setState","trigger","firstLoad","ondragend","removeChild","draggable","createDragEvents","columns","rest","onDraggedColumnChange","reorderIndicatorUpClassName","reorderIndicatorDownClassName","cols","map","headerClassName","col","id","accessor","Header","originalOrder","newOrder","JSON","stringify","r","Component","displayName","propTypes","PropTypes","shape","oneOf","isRequired","arrayOf","string","bool","func"],"mappings":"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"}